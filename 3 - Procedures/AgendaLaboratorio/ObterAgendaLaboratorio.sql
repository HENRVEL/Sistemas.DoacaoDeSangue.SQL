USE [BD_DOACAO]
GO

/**
Banco: BD_DOACAO
Date: 21/08/2016	
**/

ALTER PROCEDURE ObterAgendaLaboratorio
(
	@ID_LAB int
)
AS
BEGIN
	
	SELECT 
	   AGL.ID
      ,AGL.ID_LAB
      ,AGL.DATA
      ,AGL.HORA
	FROM [dbo].[TB_CD_AGENDA_LABORATORIO_AGL] AGL WITH(NOLOCK)
	LEFT JOIN [dbo].[TB_CD_AGENDAMENTO_DOADOR_AGD] AGD WITH(NOLOCK)
	ON AGL.ID = AGD.ID_AGL
	WHERE AGD.CANCELADO IS NULL
	AND AGL.DATA > GETDATE()
	AND AGL.ID_LAB = @ID_LAB

END
GO





